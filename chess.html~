<head>
  <title>Chess</title>
</head>

<body>
  <!--  A container is recommended for Meteor -->
  <div class="container">
    {{>main}} <!-- everything starts with a root Meteor template -->
  </div>
</body>

<!-- this is the root Meteor template for everything -->
<template name="main">
  {{! calls the login package control for creating account or logging in, and displays user name}}
  <h1>Welcome to Meteor Chess, {{>loginButtons}}!</h1> 
  {{#if currentUser}} 
    {{#if inGame}} {{! if in a game, use inGame template}}
      {{>inGameTemplate}}
    {{else}} {{! if not in a game, use getGame template}}
      {{>getGameTemplate}}
    {{/if}} {{! end of #if inGame}}
  {{else }} {{! if not logged in}}
    {{>notLoggedInTemplate}}
  {{/if}} {{! end of #if currentUser}}
</template>

<template name="inGameTemplate">
      {{#each games}}
        {{> gameTemplate}}
      {{/each}}
</template>

<template name="gameTemplate">
      {{bname}}<br />
      {{#if ismyid black}}
        {{#if ismyid turn}}
          <input> {{message}<br />
        {{/if}}
      {{/if}}
      <code>
      {{{nl2brnbsp ascii}}}
      </code>
      <br />
      {{wname}}<br />
      {{#if ismyid white}}
        {{#if ismyid turn}}
          <input> {{message}}<br /> 
        {{/if}}
      {{/if}}
      <button class="resign">Resign</button>
</template>

<template name="getGameTemplate">
  Offer or accept a game.
  {{#each users}}
    {{>userTemplate}}
  {{/each}}
</template>

<template name="userTemplate">
  <li>{{user}}</li>
</template>

<template name="notLoggedInTemplate">
  Click "Sign In" above to log in or create a new user account.
</template>

